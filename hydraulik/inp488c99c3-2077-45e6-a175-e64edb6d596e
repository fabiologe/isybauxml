<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>swmmio map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />
    <link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id='map'></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiZW1uZXQiLCJhIjoiY2pscGFpZjRlMjJmdDNsbjNycDN6a3J0OCJ9.wYmEb0AnxVVMKVhs2ns89A';
var map = new mapboxgl.Map({
    style:'mapbox://styles/emnet/ckjt4ym0q00cz19ob1y62adi5',
    // center: [-75.148946, 39.921685],
	center:[6.888335649985567, 49.29148191197512],
    zoom: 15,
    container: 'map',
});

	map.fitBounds([[6.8841284164992365, 49.28805508483603], [6.892572210251164, 49.29579778505846]]);
conduits = {"type": "FeatureCollection", "features": []}
nodes = {"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.884128, 49.288976]}, "properties": {"InvertElev": 0.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "Auslauf1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887714, 49.289652]}, "properties": {"InvertElev": 212.457, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A029"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888682, 49.29056]}, "properties": {"InvertElev": 211.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A049"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888714, 49.291021]}, "properties": {"InvertElev": 210.757, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A057a"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888716, 49.291043]}, "properties": {"InvertElev": 210.49, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A057b"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888636, 49.291049]}, "properties": {"InvertElev": 210.77, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A057c"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888527, 49.291066]}, "properties": {"InvertElev": 208.52, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A057d"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888715, 49.291493]}, "properties": {"InvertElev": 209.894, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A071"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888855, 49.29183]}, "properties": {"InvertElev": 211.918, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A079"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889148, 49.292386]}, "properties": {"InvertElev": 215.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A093"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889272, 49.292636]}, "properties": {"InvertElev": 216.342, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A099"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889318, 49.2928]}, "properties": {"InvertElev": 217.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A101"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889436, 49.292994]}, "properties": {"InvertElev": 217.2, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A105"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890716, 49.293613]}, "properties": {"InvertElev": 218.5, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A125"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891061, 49.293654]}, "properties": {"InvertElev": 0.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A129ZY"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891517, 49.293766]}, "properties": {"InvertElev": 223.31, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A135"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891669, 49.293861]}, "properties": {"InvertElev": 223.673, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A137"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891821, 49.29388]}, "properties": {"InvertElev": 224.66, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A139-2"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887971, 49.289752]}, "properties": {"InvertElev": 211.579, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A31"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88873, 49.291167]}, "properties": {"InvertElev": 211.088, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "A61"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887062, 49.289226]}, "properties": {"InvertElev": 211.46, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4002"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886707, 49.289234]}, "properties": {"InvertElev": 210.6, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4003"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886626, 49.289264]}, "properties": {"InvertElev": 210.45, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4004"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886517, 49.289403]}, "properties": {"InvertElev": 209.75, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4005"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887196, 49.289113]}, "properties": {"InvertElev": 212.65, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4009"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887139, 49.289161]}, "properties": {"InvertElev": 212.52, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4010"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886487, 49.289535]}, "properties": {"InvertElev": 208.83, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4012"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88646, 49.289577]}, "properties": {"InvertElev": 207.75, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4013"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886205, 49.289977]}, "properties": {"InvertElev": 206.67, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4014"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886202, 49.290121]}, "properties": {"InvertElev": 206.47, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "BAPUE4015AL"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.892029, 49.294077]}, "properties": {"InvertElev": 224.5, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "FIKTIV"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886959, 49.29087]}, "properties": {"InvertElev": 204.59, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-027"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887687, 49.291042]}, "properties": {"InvertElev": 204.68, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-028"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887847, 49.291584]}, "properties": {"InvertElev": 204.8, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-029"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887826, 49.291954]}, "properties": {"InvertElev": 204.91, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-030"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887833, 49.292324]}, "properties": {"InvertElev": 205.07, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-031"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887915, 49.292644]}, "properties": {"InvertElev": 205.22, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-032"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888224, 49.293058]}, "properties": {"InvertElev": 205.3, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-033"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888551, 49.293516]}, "properties": {"InvertElev": 205.487, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-034"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888919, 49.29396]}, "properties": {"InvertElev": 205.64, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-035"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889274, 49.29441]}, "properties": {"InvertElev": 205.77, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-036"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889638, 49.294844]}, "properties": {"InvertElev": 205.79, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-037"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890071, 49.295221]}, "properties": {"InvertElev": 205.99, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-038"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890564, 49.295547]}, "properties": {"InvertElev": 206.12, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-039"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891028, 49.295798]}, "properties": {"InvertElev": 206.7, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "HS-040"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886174, 49.290774]}, "properties": {"InvertElev": 203.37, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "H-025"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886327, 49.290597]}, "properties": {"InvertElev": 204.17, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "H-025.2"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886242, 49.290767]}, "properties": {"InvertElev": 203.76, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "H-026"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.892104, 49.293757]}, "properties": {"InvertElev": 225.6, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3540"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891481, 49.293567]}, "properties": {"InvertElev": 222.13, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3541"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890848, 49.293392]}, "properties": {"InvertElev": 219.32, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3542"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890215, 49.293217]}, "properties": {"InvertElev": 217.3, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3543"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889942, 49.293095]}, "properties": {"InvertElev": 216.9, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3544"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889729, 49.292931]}, "properties": {"InvertElev": 216.77, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3545"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889584, 49.292717]}, "properties": {"InvertElev": 216.63, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3546"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889436, 49.292168]}, "properties": {"InvertElev": 215.55, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3547"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889068, 49.291548]}, "properties": {"InvertElev": 212.19, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3548"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889028, 49.291297]}, "properties": {"InvertElev": 211.91, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3549"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889024, 49.29092]}, "properties": {"InvertElev": 211.39, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3550"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888272, 49.289751]}, "properties": {"InvertElev": 213.13, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3551"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888735, 49.290261]}, "properties": {"InvertElev": 211.63, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3552"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888911, 49.290575]}, "properties": {"InvertElev": 211.39, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3553"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88897, 49.290887]}, "properties": {"InvertElev": 211.12, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3554"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887788, 49.289389]}, "properties": {"InvertElev": 214.82, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3555"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887756, 49.289458]}, "properties": {"InvertElev": 211.9, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3556"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887255, 49.289356]}, "properties": {"InvertElev": 211.53, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3557"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887036, 49.289319]}, "properties": {"InvertElev": 211.66, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3558"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887195, 49.289372]}, "properties": {"InvertElev": 211.47, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "M3559"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887005, 49.289603]}, "properties": {"InvertElev": 208.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1321"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887584, 49.289751]}, "properties": {"InvertElev": 208.25, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1322"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887518, 49.290114]}, "properties": {"InvertElev": 206.85, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1323"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887918, 49.290277]}, "properties": {"InvertElev": 206.8, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1324"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888305, 49.290496]}, "properties": {"InvertElev": 207.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1325"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888483, 49.290813]}, "properties": {"InvertElev": 207.5, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1325.1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88742, 49.290563]}, "properties": {"InvertElev": 206.58, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1327.1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888559, 49.292555]}, "properties": {"InvertElev": 207.796, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1331-1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888473, 49.292239]}, "properties": {"InvertElev": 207.293, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1331-2"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888355, 49.29184]}, "properties": {"InvertElev": 206.813, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1331-3"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88814, 49.291462]}, "properties": {"InvertElev": 206.289, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1331-4"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887968, 49.291034]}, "properties": {"InvertElev": 205.8, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1331-5"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887565, 49.291096]}, "properties": {"InvertElev": 205.358, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1331-6"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88885, 49.293093]}, "properties": {"InvertElev": 208.502, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1332"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889424, 49.29355]}, "properties": {"InvertElev": 209.69, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1333"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.89033, 49.293936]}, "properties": {"InvertElev": 212.413, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1334"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890872, 49.293758]}, "properties": {"InvertElev": 216.0, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "N1337"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887066, 49.291096]}, "properties": {"InvertElev": 206.45, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "Rï¿½-Auslauf"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.8895, 49.293153]}, "properties": {"InvertElev": 217.25, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "S107"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890984, 49.293602]}, "properties": {"InvertElev": 220.48, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "S129"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887151, 49.291332]}, "properties": {"InvertElev": 204.4, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "W_Rï¿½"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886444, 49.289039]}, "properties": {"InvertElev": 210.4, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1288"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886858, 49.289218]}, "properties": {"InvertElev": 210.98, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1289"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886955, 49.289655]}, "properties": {"InvertElev": 207.17, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1306"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886745, 49.29027]}, "properties": {"InvertElev": 206.17, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1307"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886996, 49.289532]}, "properties": {"InvertElev": 209.24, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1321"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88756, 49.289683]}, "properties": {"InvertElev": 208.4, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1322"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88799, 49.289951]}, "properties": {"InvertElev": 207.58, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1323"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888428, 49.290316]}, "properties": {"InvertElev": 207.05, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1324"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888605, 49.29056]}, "properties": {"InvertElev": 208.43, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1325"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888724, 49.290751]}, "properties": {"InvertElev": 209.5, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1325.1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888113, 49.290477]}, "properties": {"InvertElev": 206.81, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1326"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88765, 49.290661]}, "properties": {"InvertElev": 206.63, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1327"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.887149, 49.290448]}, "properties": {"InvertElev": 206.4, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1327.1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888626, 49.29148]}, "properties": {"InvertElev": 208.16, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1329"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888774, 49.291868]}, "properties": {"InvertElev": 209.77, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1330"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.888921, 49.292269]}, "properties": {"InvertElev": 212.51, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1331"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889078, 49.292729]}, "properties": {"InvertElev": 216.02, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1332"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889353, 49.293165]}, "properties": {"InvertElev": 214.74, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1333"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889799, 49.293378]}, "properties": {"InvertElev": 215.12, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1334"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890339, 49.293561]}, "properties": {"InvertElev": 216.54, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1335"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.89079, 49.293634]}, "properties": {"InvertElev": 218.17, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1336"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891247, 49.293708]}, "properties": {"InvertElev": 220.36, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1337"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891795, 49.293934]}, "properties": {"InvertElev": 223.31, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1338"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889858, 49.294814]}, "properties": {"InvertElev": 207.87, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1341"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890306, 49.294765]}, "properties": {"InvertElev": 207.65, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1342RU"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.889544, 49.294946]}, "properties": {"InvertElev": 203.57, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1342.0AL"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.89042, 49.294704]}, "properties": {"InvertElev": 208.37, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1343"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890318, 49.29445]}, "properties": {"InvertElev": 208.77, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1344"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890588, 49.294308]}, "properties": {"InvertElev": 211.31, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1345"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.890888, 49.294179]}, "properties": {"InvertElev": 214.05, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1346"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891014, 49.294292]}, "properties": {"InvertElev": 214.49, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1347"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.89115, 49.294361]}, "properties": {"InvertElev": 215.55, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1348"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891677, 49.294066]}, "properties": {"InvertElev": 220.95, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1348.1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.891842, 49.293968]}, "properties": {"InvertElev": 223.98, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1348.2"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.892181, 49.293772]}, "properties": {"InvertElev": 225.8, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1349"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.892572, 49.293921]}, "properties": {"InvertElev": 226.62, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "1350"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885899, 49.290908]}, "properties": {"InvertElev": 203.28, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "24"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885935, 49.290891]}, "properties": {"InvertElev": 203.3, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "24_Rï¿½"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.884607, 49.289146]}, "properties": {"InvertElev": 205.4, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "744"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.884792, 49.28919]}, "properties": {"InvertElev": 205.66, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "745"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885005, 49.289377]}, "properties": {"InvertElev": 205.76, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "746"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88561, 49.289782]}, "properties": {"InvertElev": 205.93, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "747"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886155, 49.290019]}, "properties": {"InvertElev": 206.1, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "747.1"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886674, 49.290243]}, "properties": {"InvertElev": 206.17, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "747.2"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885593, 49.2898]}, "properties": {"InvertElev": 206.59, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "748"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.884964, 49.289366]}, "properties": {"InvertElev": 207.74, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "749"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.884817, 49.289249]}, "properties": {"InvertElev": 206.63, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "762"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.884864, 49.289076]}, "properties": {"InvertElev": 206.79, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "762RU"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88504, 49.289002]}, "properties": {"InvertElev": 207.54, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "763"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885257, 49.288903]}, "properties": {"InvertElev": 207.91, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "764"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.88582, 49.288669]}, "properties": {"InvertElev": 208.79, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "765"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886139, 49.288548]}, "properties": {"InvertElev": 209.83, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "766"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885893, 49.288311]}, "properties": {"InvertElev": 210.98, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "767"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885618, 49.288073]}, "properties": {"InvertElev": 211.59, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "767F"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886098, 49.288215]}, "properties": {"InvertElev": 212.03, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "768"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886339, 49.288055]}, "properties": {"InvertElev": 212.28, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "769"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.886727, 49.288369]}, "properties": {"InvertElev": 211.71, "MaxDepth": 0.0, "InitDepth": 0.0, "SurchargeDepth": 0.0, "PondedArea": 0.0, "Name": "770"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.885298, 49.290674]}, "properties": {"InvertElev": 207.61, "OutfallType": "FREE", "StageOrTimeseries": "NO", "Name": "23"}}]}
var sewer_source, node_source;

map.on('load', function() {

    // load the data into the map
    sewer_source = map.addSource('sewer-data', {'type': 'geojson', 'data': conduits});
    node_source =  map.addSource('node-data',  {'type': 'geojson', 'data': nodes});

    map.addLayer({
      "id": "sewer",
      'type': 'line',
      "source": "sewer-data",
      'paint': {
          'line-color': [
              "interpolate-hcl", [ "linear" ], ["number",  [ "get", "MaxQPerc" ], 0],
              0, '#5cd66e' ,  1, '#dde639' ,  2, '#e64839',
          ],
          'line-opacity': 0.85,
          'line-width': [
          'interpolate', [ "exponential", 10 ], [ 'zoom' ],
          10, [ "ln", ["+", [ "get", "MaxQ" ], 1]],
          15, [ "ln", ["+", [ "get", "MaxQ" ], 1]],
        ],
      }
    });

    map.addLayer({
        "id": "sewer-hover",
        'type': 'line',
        "source": "sewer-data",
        'paint': {
            'line-color': "#8384a4",
            'line-opacity': 1,
            'line-width':4,
        },
        'filter':["==", "'InletNode'", ""],
    });

    map.addLayer({
        "id": "node",
        'type': 'circle',
        "source": "node-data",
        'paint': {
            'circle-color': '#1182d9',
            'circle-opacity': 0.75,
            'circle-radius':3,
        }
    });

    // When a click event occurs near a polygon, open a popup at the location of
    // the feature, with description HTML from its properties.
    map.on('click', function (e) {
        //create a buffer to forgive those clumsy clicks
        var x = e.point.x;
        var y = e.point.y;
        var clickbox = [[x-10, y-10], [x+10, y+10]]

        var features = map.queryRenderedFeatures(clickbox, { layers: ['sewer', 'node'] });
        if (!features.length) {
            map.setFilter("sewer-hover", ["==", "Name", ""]);
            return;
        }

        var feature = features[0];
        console.log(feature)

        // highlight whats been clicked
        map.setFilter("sewer-hover", ["==", "Name", feature.properties.Name]);
        html_message_start = '<strong>' + feature.properties.Name + '</strong><hr>';
        html_message = [];
        Object.keys(feature.properties).forEach(function(key) {
            html_message.push(key + ': ' + feature.properties[key]);
        });
        html_message = html_message_start + html_message.join('<br>');

        var popup = new mapboxgl.Popup()
            .setLngLat(map.unproject(e.point))
            .setHTML(html_message)
            .addTo(map);
    });
    // Use the same approach as above to indicate that the symbols are clickable
    // by changing the cursor style to 'pointer'
    map.on('mousemove', function (e) {
        var features = map.queryRenderedFeatures(e.point, { layers: ['sewer'] });
        if (features.length==0) {
            return;
        }
        map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
    });
});

</script>
</body>
</html>
